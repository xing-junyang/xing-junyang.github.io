# 创建并运行 QEMU 虚拟机

`QEMU` 虚拟机可以通过**命令行**和**图形化界面**进行配置。利用命令行进行配置，只需短短几行代码即可创建并运行虚拟机，十分便捷且独树一帜。因此，下面介绍这一种配置方式。

## 创建磁盘映像

虚拟机的操作系统和其他文件安装在虚拟磁盘映像之上，因此，我们首先要创建**磁盘映像**。目前，主流的`QEMU` 虚拟机采用 `qcow2` 文件格式的磁盘映像，我们可以使用 `QEMU` 自带的工具 `qemu-img` 进行创建。

例如，在终端中输入下面的指令，我们就创建了一个大小为 `10G`、文件名为 `disk_image.qcow2` 的 `qcow2` 磁盘映像

```shell
qemu-img create -f qcow2 disk_image.qcow2 10G
```

下面列出了 `qemu-img` 的常用选项。

:::details 常用选项

**指令格式**

```shell
qemu-img create [options] filename [size]
```

其中 `options` 是创建选项，`filename` 是要创建的镜像文件的名称，`size` 是镜像文件的大小。


**常用创建选项**

| 选项                     | 描述                                                   |
|--------------------------|--------------------------------------------------------|
| `-f <格式>`               | 指定创建的镜像文件的格式，常见的格式包括 `qcow2`、`raw` 等。|
| `-o <选项>`               | 设置格式特定的选项，比如 `qcow2` 格式的压缩算法等。         |
| `-b <父镜像>`              | 创建一个基于指定父镜像的镜像文件。                       |
| `-s <大小>`               | 设置镜像文件的大小，可以使用 `K`、`M`、`G` 等单位。             |
| `-F <源格式>`              | 指定输入镜像文件的格式。                                 |
| `-O <目标格式>`            | 指定输出镜像文件的格式。                                 |
| `-q`                     | 静默模式，不显示进度信息。                              |

可以通过运行 `qemu-img create -h` 来查看完整的选项列表和帮助信息。
:::

# 更多

对于其他运行配置的细节，可参阅官方文档[《运行》](https://www.qemu.org/docs/master/system/invocation.html#invocation)。